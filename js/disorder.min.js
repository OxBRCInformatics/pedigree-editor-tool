/*! pedigree-editor-tool - v1.3.0 - 2017-05-19
* https://github.com/OxBRCInformatics/pedigree-editor-tool#readme
* Copyright (c) 2017  Licensed AGPL-3.0 */

var Disorder=Class.create({initialize:function(disorderId,name,ageOfOnset,disorderType,valueAll,callWhenReady){null!=name||Helpers.isInt(disorderId)||(name=disorderId),null!=valueAll&&void 0!=valueAll||(valueAll={}),this.valueAll=valueAll,this.disorderId=disorderId,this.name=name||"loading...",this.valueAll&&void 0==this.valueAll.ageOfOnset&&(this.valueAll.ageOfOnset=ageOfOnset),this.ageOfOnset=ageOfOnset,this.valueAll&&void 0==this.valueAll.disorderType&&(this.valueAll.disorderType=disorderType),this.disorderType=disorderType,!name&&callWhenReady&&this.load(callWhenReady)},getDisorderId:function(){return this.disorderId},getName:function(){return this.name},getValueAll:function(){return this.valueAll},load:function(callWhenReady){var queryURL=Disorder.getServiceURL("OMIM")+"&id="+this.disorderId;new Ajax.Request(queryURL,{method:"GET",onSuccess:this.onDataReady.bind(this),onComplete:callWhenReady||{}})},onDataReady:function(response){try{var parsed=JSON.parse(response.responseText);console.log("LOADED DISORDER: disorder id = "+this.disorderId+", name = "+parsed.rows[0].name),this.name=parsed.rows[0].name,this.valueAll=parsed.rows[0]}catch(err){console.log("[LOAD DISORDER] Error: "+err)}}});Disorder.getServiceURL=function(disorderType){var webservice=new WebService;return"OMIM"==disorderType?webservice.getOmimLookupPath():"ICD10"==disorderType?webservice.getIcd10LookupPath():"SnomedCT"==disorderType?webservice.getSnomedCTLookupPath():"GEL"==disorderType?webservice.getGELLookupPath():webservice.getOmimLookupPath()};