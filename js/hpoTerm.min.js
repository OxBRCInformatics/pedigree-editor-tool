/*! pedigree-editor-tool - v1.3.1 - 2017-05-22
* https://github.com/OxBRCInformatics/pedigree-editor-tool#readme
* Copyright (c) 2017  Licensed AGPL-3.0 */

var HPOTerm=Class.create({initialize:function(hpoId,name,hpoPresent,valueAll,callWhenReady){null!=name||HPOTerm.isValidID(hpoId)||(name=hpoId),null!=valueAll&&void 0!=valueAll||(valueAll={}),this.valueAll=valueAll,this.hpoId=hpoId,this.name=name||"loading...",this.valueAll&&void 0==this.valueAll.hpoPresent&&(this.valueAll.hpoPresent=hpoPresent),this.hpoPresent=hpoPresent,!name&&callWhenReady&&this.load(callWhenReady)},getID:function(){return this.hpoId},getValueAll:function(){return this.valueAll},getName:function(){return this.name},load:function(callWhenReady){var queryURL=(new WebService).getHPOLookupPath()+"id="+this.hpoId;new Ajax.Request(queryURL,{method:"GET",onSuccess:this.onDataReady.bind(this),onComplete:callWhenReady||{}})},onDataReady:function(response){try{var parsed=JSON.parse(response.responseText);console.log("LOADED HPO TERM: id = "+this.hpoId+", name = "+parsed.rows[0].name),this.name=parsed.rows[0].name,this.valueAll=parsed.rows[0]}catch(err){console.log("[LOAD HPO TERM] Error: "+err)}}});HPOTerm.isValidID=function(id){return/^HP\:(\d)+$/i.test(id)};