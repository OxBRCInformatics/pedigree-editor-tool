/*! pedigree-editor-tool - v1.3.0 - 2017-05-19
* https://github.com/OxBRCInformatics/pedigree-editor-tool#readme
* Copyright (c) 2017  Licensed AGPL-3.0 */

var Helpers={};window.console||(window.console={log:function(){}}),"function"!=typeof String.prototype.trim&&(String.prototype.trim=function(){return this.replace(/^\s+|\s+$/g,"")}),Array.prototype.forEach||(Array.prototype.forEach=function(fun){var t=Object(this),len=t.length>>>0;if("function"!=typeof fun)throw new TypeError;for(var thisArg=arguments.length>=2?arguments[1]:void 0,i=0;i<len;i++)i in t&&fun.call(thisArg,t[i],i,t)}),"undefined"!=typeof HTMLElement&&!HTMLElement.prototype.click&&document.createEvent&&(HTMLElement.prototype.click=function(){var eventObj=document.createEvent("MouseEvents");eventObj.initEvent("click",!0,!0),this.dispatchEvent(eventObj)}),Helpers.clone2DArray=function(arr2D){for(var new2D=[],i=0;i<arr2D.length;++i)new2D.push(arr2D[i].slice());return new2D},Helpers.cloneObject=function(obj){var target={};for(var i in obj)obj.hasOwnProperty(i)&&(target[i]=obj[i]);return target},Helpers.setByTemplate=function(template,data){if("object"==typeof template&&"object"==typeof data)for(var key in template)data.hasOwnProperty(key)&&template.hasOwnProperty(key)&&("object"==typeof template[key]?"[object Array]"===Object.prototype.toString.call(template[key])?template[key]=data[key].slice():Helpers.setByTemplate(template[key],data[key]):template[key]=data[key])},Helpers.copyProperties=function(objectSource,objectTarget){for(var p in objectSource)objectSource.hasOwnProperty(p)&&(objectTarget[p]=objectSource[p])},Helpers.arrayContains=function(array,item){if(Array.prototype.indexOf)return!(array.indexOf(item)<0);for(var i=0,len=array.length;i<len;++i)if(array[i]===item)return!0;return!1},Helpers.arrayIndexOf=function(array,item){if(Array.prototype.indexOf)return array.indexOf(item);for(var i=0,len=array.length;i<len;++i)if(array[i]===item)return i;return-1},Helpers.indexOfLastMinElementInArray=function(array){for(var min=array[0],minIndex=0,i=1,len=array.length;i<len;++i)array[i]<=min&&(minIndex=i,min=array[i]);return minIndex},Helpers.filterUnique=function(array){for(var hash={},result=[],i=array.length;i--;)hash[array[i]]||(hash[array[i]]=!0,result.push(array[i]));return result},Helpers.replaceInArray=function(array,value,newValue){for(var i=0,len=array.length;i<len;++i)if(array[i]===value){array[i]=newValue;break}},Helpers.removeFirstOccurrenceByValue=function(array,item){for(var i=0,len=array.length;i<len;++i)if(array[i]==item){array.splice(i,1);break}},Helpers.isObjectEmpty=function(map){for(var key in map)if(map.hasOwnProperty(key))return!1;return!0},Helpers.numTextLines=function(text){return null===text||""==text?0:(text.replace(/^\s+|\s+$/g,"").match(/\n/g)||[]).length+1},Helpers.isInt=function(n){return!isNaN(n)&&parseInt(n)==parseFloat(n)},Helpers.toObjectWithTrue=function(array){for(var obj={},i=0;i<array.length;++i)void 0!==array[i]&&(obj[array[i]]=!0);return obj},Helpers.romanize=function(num){if(!+num)return!1;for(var digits=String(+num).split(""),key=["","C","CC","CCC","CD","D","DC","DCC","DCCC","CM","","X","XX","XXX","XL","L","LX","LXX","LXXX","XC","","I","II","III","IV","V","VI","VII","VIII","IX"],roman="",i=3;i--;)roman=(key[+digits.pop()+10*i]||"")+roman;return Array(+digits.join("")+1).join("M")+roman},Helpers.stopEventPropagation=function(event){event.preventDefault(),event.stopPropagation(),event.stopImmediatePropagation()},Helpers.disableMouseclicks=function(element){element.__oldMouseDown=element.onmousedown,element.onmousedown=Helpers.stopEventPropagation,element.__oldClick=element.onclick,element.onclick=Helpers.stopEventPropagation},Helpers.enableMouseclicks=function(element){element.hasOwnProperty("__oldMouseDown")?(element.onmousedown=element.__oldMouseDown,delete element.__oldMouseDown):element.onmousedown=null,element.hasOwnProperty("__oldClick")?(element.onclick=element.__oldClick,delete element.__oldClick):element.onclick=null},Helpers.makeFlattened2DArrayCopy=function(array){return[].concat.apply([],array)},Helpers.swap=function(array,i,j){var b=array[j];array[j]=array[i],array[i]=b},Helpers.permute2DArrayInFirstDimension=function(permutations,array,from){var len=array.length;if(from==len-1)return void permutations.push(Helpers.makeFlattened2DArrayCopy(array));for(var j=from;j<len;j++)Helpers.swap(array,from,j),Helpers.permute2DArrayInFirstDimension(permutations,array,from+1),Helpers.swap(array,from,j)},Helpers.Timer=function(){this.startTime=void 0,this.lastCheck=void 0,this.start()},Helpers.Timer.prototype={start:function(){this.startTime=(new Date).getTime(),this.lastCheck=this.startTime},restart:function(){this.start()},report:function(){return(new Date).getTime()-this.lastCheck},printSinceLast:function(msg){var current=(new Date).getTime(),elapsed=current-this.lastCheck;this.lastCheck=current,console.log(msg+elapsed+"ms")}},Helpers.stringifyObject=function(obj){return _printObjectInternal(obj,1)},Helpers.printObject=function(obj){console.log(_printObjectInternal(obj,0))},_printObjectInternal=function(o,level){if(level>10)return"...[too deep, possibly a recursive object]...";var output="";if("object"==typeof o)if("[object Array]"===Object.prototype.toString.call(o)){output="[";for(var i=0;i<o.length;i++)i>0&&(output+=", "),output+=_printObjectInternal(o[i],level+1);output+="]"}else{output="{";var idx=0;0==level&&(output+="\n");for(var property in o)o.hasOwnProperty(property)&&(0!=level&&0!=idx&&(output+=", "),output+=property+": "+_printObjectInternal(o[property],level+1),0==level&&(output+="\n"),idx++);output+="}"}else output="string"==typeof o?"'"+o+"'":""+o;return output},Helpers.padString=function(string,width,padding,onLeft){return width<=string.length?string:Helpers.padString(onLeft?padding+string:string+padding,width,padding,onLeft)},Helpers.createRandomID=function(){for(var text="",possible="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",i=0;i<5;i++)text+=possible.charAt(Math.floor(Math.random()*possible.length));return text},Helpers.getSiteURL=function(){return window.location.origin+window.location.pathname.substr(0,window.location.pathname.lastIndexOf("/"))},Helpers.getGenderDisplayText=function(genderString){var gender="Unknown";return"female"==(genderString=genderString.toLowerCase())||"f"==genderString||"2"==genderString?gender="Female":"male"==genderString||"m"==genderString||"1"==genderString?gender="Male":"other"!=genderString&&"o"!=genderString&&"9"!=genderString||(gender="Other"),gender};