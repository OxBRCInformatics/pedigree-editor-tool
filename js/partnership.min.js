/*! pedigree-editor-tool - v1.3.0-SNAPSHOT - 2017-05-19
* https://github.com/OxBRCInformatics/pedigree-editor-tool#readme
* Copyright (c) 2017  Licensed AGPL-3.0 */

var Partnership=Class.create(AbstractNode,{initialize:function($super,x,y,id,properties){this._childlessStatus=null,this._childlessReason="",this._type="Partnership",this._broken=!1,this._consangrMode="N",this.setBrokenStatus(properties.broken),this.setConsanguinity(properties.consangr),$super(x,y,id),this.assignProperties(properties)},_generateGraphics:function(x,y){return new PartnershipVisuals(this,x,y)},setChildlessStatus:function(status){return this.isValidChildlessStatus(status)||(status=null),status!=this.getChildlessStatus()&&(this._childlessStatus=status,this.setChildlessReason(null),this.getGraphics().updateChildlessShapes(),this.getGraphics().updateChildhubConnection(),this.getGraphics().getHoverBox().regenerateHandles()),this.getChildlessStatus()},setConsanguinity:function(value){"A"!=value&&"N"!=value&&"Y"!=value&&"P"!=value&&"U"!=value&&(value="A"),this._consangrMode!=value&&(this._consangrMode=value),this.getGraphics()&&this.getGraphics().getHoverBox().regenerateButtons()},getConsanguinity:function(){return this._consangrMode},setBrokenStatus:function(value){void 0===value&&(value=!1),this._broken!=value&&(this._broken=value)},getBrokenStatus:function(){return this._broken},getSummary:function(){var childlessTextInactive=!1,childlessInactive=[];return editor.getGraph().hasNonPlaceholderNonAdoptedChildren(this.getID())?(childlessInactive=!0,childlessTextInactive=!0):editor.getGraph().hasNoNonPlaceholderChildren(this.getID())&&(childlessInactive=["none"]),{identifier:{value:this.getID()},childlessSelect:{value:this.getChildlessStatus()?this.getChildlessStatus():"none",inactive:childlessInactive},childlessText:{value:this.getChildlessReason()?this.getChildlessReason():"none",inactive:childlessTextInactive},consangr:{value:this._consangrMode,inactive:!1},broken:{value:this.getBrokenStatus(),inactive:!1}}},getProperties:function($super){var info=$super();return null!=this.getChildlessStatus()&&(info.childlessStatus=this.getChildlessStatus(),info.childlessReason=this.getChildlessReason()),"A"!=this.getConsanguinity()&&(info.consangr=this.getConsanguinity()),this.getBrokenStatus()&&(info.broken=this.getBrokenStatus()),info},assignProperties:function($super,info){return!!$super(info)&&(info.childlessStatus&&info.childlessStatus!=this.getChildlessStatus()&&this.setChildlessStatus(info.childlessStatus),info.childlessReason&&info.childlessReason!=this.getChildlessReason()&&this.setChildlessReason(info.childlessReason),info.consangr&&info.consangr!=this.getConsanguinity()&&this.setConsanguinity(info.consangr),info.broken&&info.broken!=this.getBrokenStatus()&&this.setBrokenStatus(info.broken),!0)}});Partnership.addMethods(ChildlessBehavior);