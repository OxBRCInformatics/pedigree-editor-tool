/*! pedigree-editor-tool - v1.3.0 - 2017-05-19
* https://github.com/OxBRCInformatics/pedigree-editor-tool#readme
* Copyright (c) 2017  Licensed AGPL-3.0 */

var ProbandDataLoader=Class.create({initialize:function(){this.probandData={}},load:function(callWhenReady){var probandID=XWiki.currentDocument.page,patientJsonURL=new XWiki.Document("ExportPatient","PhenoTips").getURL("get","id="+probandID);patientJsonURL+="&rand="+Math.random(),new Ajax.Request(patientJsonURL,{method:"GET",onSuccess:this.onProbandDataReady.bind(this),onComplete:callWhenReady||{}})},onProbandDataReady:function(response){response.responseJSON?this.probandData=response.responseJSON:console.log("[!] Error parsing patient JSON"),console.log("Proband data: "+Helpers.stringifyObject(this.probandData))}});