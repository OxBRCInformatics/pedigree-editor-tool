/*! pedigree-editor-tool - v1.3.0 - 2017-05-19
* https://github.com/OxBRCInformatics/pedigree-editor-tool#readme
* Copyright (c) 2017  Licensed AGPL-3.0 */

var unRenderedLegend=Class.create(unRenderedLegendSuper,{initialize:function($super){$super("Unassigned participants",!0,!0),this._unrenderedLegendInfo=new Element("div",{class:"legend-box legend-info",id:"extra-legend-info"}).insert(new Element("div",{class:"infomessage"}).insert("Please drag & drop all 'unassigned' participants from the list below into the correct position in the pedigree.")),this.unrenderedCloseButton=new Element("span",{class:"close-button"}).update(" "),this.unrenderedCloseButton.observe("click",this.hideUnRenderedHint.bindAsEventListener(this)),this._unrenderedLegendInfo.insert({top:this.unrenderedCloseButton}),this._list.insert(this._unrenderedLegendInfo),this._termCache={}},hideUnRenderedHint:function(){editor.getPreferencesManager().setConfigurationOption("user","hideDraggingHint",!0),this._unrenderedLegendInfo.hide()},_getPrefix:function(id){return"UnRendered"},getObjectColor:function(id){return"#CCCCCC"},addCase:function($super,id,name,nodeID){this._termCache.hasOwnProperty(id)||(this._termCache[id]=new HPOTerm(id,name)),$super(id,name,nodeID)},addNode:function($super,id,name,nodeID,node){this._termCache.hasOwnProperty(id)||(this._termCache[id]={id:id,name:name}),$super(id,name,nodeID,node)},_updateTermName:function(id){var _this=this;this._legendBox.down("li#"+this._getPrefix()+"-"+_this._hashID(id)+" .disorder-name").update(this.getTerm(id).getName())},_onDropObject:function(node,hpoID,valueAll){var self=this;if(!node.isPersonGroup()){var participantId=node.getParticipantId();if(participantId&&participantId.trim().length>0){var closeFunction=function(){this.dialog.show()};return void editor.getOkCancelDialogue().showCustomized("You can not assign to a node that has Participant Id.","Genomics England","Close",closeFunction,null,null,null,null,!0)}var yesFunction=function(){Person.copyUnassignedNode(node,valueAll);var HTMLId=self._getPrefix()+valueAll.unRenderedIndex,unRenderedNode=editor._unRenderedLegend._legendBox.select("#"+HTMLId);unRenderedNode.length>0&&(unRenderedNode=unRenderedNode[0]),unRenderedNode&&(unRenderedNode.removeClassName("UnRendered-legend-box-item"),unRenderedNode.addClassName("UnRendered-legend-box-item-selected"))};editor.getOkCancelDialogue().showCustomized("Are you sure you want to assign the values to this node?","Genomics England","Yes",yesFunction,"No",closeFunction,null,!0)}}});