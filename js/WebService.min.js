/*! pedigree-editor-tool - v1.3.1 - 2017-05-22
* https://github.com/OxBRCInformatics/pedigree-editor-tool#readme
* Copyright (c) 2017  Licensed AGPL-3.0 */

WebService=Class.create({initialize:function(){this._settings=new Settings,this._baseURL=this._settings.getSetting("codingDefinitionServiceEndpoint")},getOmimLookupPath:function(){return(this._baseURL?this._baseURL:this._settings.getSetting("codingDefinitionServiceEndpoint"))+"/lookupServices/OMIMLookupService?"},getIcd10LookupPath:function(){return(this._baseURL?this._baseURL:this._settings.getSetting("codingDefinitionServiceEndpoint"))+"/lookupServices/ICDLookupService?"},getSnomedCTLookupPath:function(){return(this._baseURL?this._baseURL:this._settings.getSetting("codingDefinitionServiceEndpoint"))+"/lookupServices/SNOMEDCTLookupService?"},getGELLookupPath:function(){return(this._baseURL?this._baseURL:this._settings.getSetting("codingDefinitionServiceEndpoint"))+"/lookupServices/DiseaseList?"},getEthnicityLookupPath:function(){return(this._baseURL?this._baseURL:this._settings.getSetting("codingDefinitionServiceEndpoint"))+"/lookupServices/Ethnicity?"},getHPOLookupPath:function(){return(this._baseURL?this._baseURL:this._settings.getSetting("codingDefinitionServiceEndpoint"))+"/OntologyService/LookupService?"},getDiagramEndpointPath:function(){var config=this._settings.getSetting("diagramEndpoint");switch(config.service){case"mercury":var returnUrl=this.getUrlParameter("returnUrl",!0),participantId=this.getUrlParameter("participantId",!0),labkeyToken=this.getUrlParameter("labkeyToken",!0),labkeyEmail=this.getUrlParameter("labkeyEmail",!0);return config.mercuryPedigreeServiceEndpoint+"/"+participantId+"?accessPath="+returnUrl+"&labkeyToken="+labkeyToken+"&labkeyEmail="+labkeyEmail;case"openclinica":return"/openclinica/pedigree/get?eventCRFId="+this.getUrlParameter("eventCRFId",!0)+"&status="+this.getUrlParameter("status",!0)+"&participantId="+(participantId=this.getUrlParameter("participantId",!0));case"local":return null}},saveDiagramEndpointPath:function(){var config=this._settings.getSetting("diagramEndpoint");switch(config.service){case"mercury":var returnUrl=(_this=this).getUrlParameter("returnUrl",!0),participantId=this.getUrlParameter("participantId",!0),labkeyToken=this.getUrlParameter("labkeyToken",!0),labkeyEmail=this.getUrlParameter("labkeyEmail",!0);return config.mercuryPedigreeServiceEndpoint+"/"+participantId+"?accessPath="+returnUrl+"&labkeyToken="+labkeyToken+"&labkeyEmail="+labkeyEmail;case"openclinica":var _this=this;return"/openclinica/pedigree/update?eventCRFId="+_this.getUrlParameter("eventCRFId",!0)+"&status="+_this.getUrlParameter("status",!0)+"&participantId="+(participantId=_this.getUrlParameter("participantId",!0));case"local":return null}},getPathToEditorFiles:function(){var config=this._settings.getSetting("diagramEndpoint");switch(config.service){case"mercury":case"openclinica":return Helpers.getSiteURL()+"/"+config.pathToEditorJSFiles;case"local":return Helpers.getSiteURL()+"/"}},getUrlParameter:function(sParam,doNotDecode){var sPageURL=decodeURIComponent(window.location.search.substring(1));doNotDecode&&1==doNotDecode&&(sPageURL=window.location.search.substring(1));var sParameterName,i,sURLVariables=sPageURL.split("&");for(i=0;i<sURLVariables.length;i++)if((sParameterName=sURLVariables[i].split("="))[0].toLowerCase()===sParam.toLowerCase())return void 0===sParameterName[1]||sParameterName[1]},getParticipantId:function(){var _this=this;switch(this._settings.getSetting("diagramEndpoint").service){case"mercury":case"openclinica":return _this.getUrlParameter("participantId",!0);case"local":return null}}});